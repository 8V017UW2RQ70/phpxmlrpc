<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.&nbsp;xmlrpc_client</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.0"><link rel="start" href="index.html" title="XML-RPC for PHP"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Class documentation"><link rel="prev" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Class documentation"><link rel="next" href="ch05s02.html" title="2.&nbsp;xmlrpcmsg"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.&nbsp;xmlrpc_client</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Class documentation</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05s02.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlrpc-client"></a>1.&nbsp;xmlrpc_client</h2></div></div></div><p>This is the basic class used to represent a client of an XML-RPC server.</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e322"></a>1.1.&nbsp;Creation</h3></div></div></div><p>The constructor has the following syntax:</p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" style="padding-bottom: 1em"><tr><td><code class="funcdef">$client=new xmlrpc_client(</code></td><td><var class="pdparam">$server_path</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_hostname</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_port</var><code>)</code>;</td><td>&nbsp;</td></tr></table><table border="0" summary="Function argument synopsis" cellspacing="0" cellpadding="0"><tr><td>&nbsp;</td><td><var class="pdparam">$server_path</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_hostname</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_port</var>;</td></tr></table></div><p>Here's an example client set up to query Userland's XML-RPC server at <span class="emphasis"><em>betty.userland.com</em></span>:</p><pre class="programlisting">
$client=new xmlrpc_client("/RPC2", "betty.userland.com", 80);</pre><p>The <em class="parameter"><code>server_port</code></em> parameter is optional, and if omitted will default to 80 when using HTTP and 443 when using HTTPS (see the "send" method below.)</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e352"></a>1.2.&nbsp;Methods</h3></div></div></div><p>This class supports the following methods.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xmlrpc-client-send"></a>1.2.1.&nbsp;send</h4></div></div></div><p>This method takes the form:</p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" style="padding-bottom: 1em"><tr><td><code class="funcdef">$response=$client-&gt;send(</code></td><td><var class="pdparam">$xmlrpc_message</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$timeout</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_method</var><code>)</code>;</td><td>&nbsp;</td></tr></table><table border="0" summary="Function argument synopsis" cellspacing="0" cellpadding="0"><tr><td>&nbsp;</td><td><var class="pdparam">$xmlrpc_message</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$timeout</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$server_method</var>;</td></tr></table></div><p>Where <em class="parameter"><code>$xmlrpc_message</code></em> is an instance of <code class="classname">xmlrpcmsg</code> (see <a href="ch05s02.html">xmlrpcmsg</a>), and <em class="parameter"><code>$response</code></em> is an instance of <code class="classname">xmlrpcresp</code> (see <a href="ch05s03.html">xmlrpcresp</a>).</p><p>The <em class="parameter"><code>timeout</code></em> is optional, and will be set to <code class="literal">0</code> (wait forever) if omitted. This timeout value is passed to <code class="function">fsockopen()</code>. It is also used for detecting server timeouts during communication (i.e. if the server does not send anything to the client for <em class="parameter"><code>timeout</code></em> seconds, the connection will be closed).</p><p>The <em class="parameter"><code>server_method</code></em> parameter is optional, and if omitted will default to 'http'. The only other valid value is 'https', which will use an SSL HTTP connection to connect to the remote server. Note that your PHP must have the "curl" extensions compiled in order to use this feature. Note that when using SSL you should normally set your port number to 443, unless the SSL server you are contacting runs at any other port.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>PHP 4.0.2 or greater is required for SSL functionality. PHP 4.0.6 has a bug which prevents SSL working.</p></div><p>If the value of <em class="parameter"><code>$response</code></em> is <code class="literal">0</code> rather than an <code class="classname">xmlrpcresp</code> object, then this signifies an I/O error has occurred. You can find out what the I/O error was from the values <code class="function">$client-&gt;Erna</code> and <code class="function">$client-&gt;err string</code>.</p><p>In addition to low-level errors, the XML-RPC server you were querying may return an error in the <code class="classname">xmlrpcresp</code> object. See <a href="ch05s03.html">xmlrpcresp</a> for details of how to handle these errors.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e439"></a>1.2.2.&nbsp;setCredentials</h4></div></div></div><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" style="padding-bottom: 1em"><tr><td><code class="funcdef">$client-&gt;setCredentials(</code></td><td><var class="pdparam">$username</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$password</var><code>)</code>;</td><td>&nbsp;</td></tr></table><table border="0" summary="Function argument synopsis" cellspacing="0" cellpadding="0"><tr><td>&nbsp;</td><td><var class="pdparam">$username</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$password</var>;</td></tr></table></div><p>This method sets the username and password for authorizing the client to a server. With the default (HTTP) transport, this information is used for HTTP Basic authorization.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e454"></a>1.2.3.&nbsp;setCertificate</h4></div></div></div><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" style="padding-bottom: 1em"><tr><td><code class="funcdef">$client-&gt;setCertificate(</code></td><td><var class="pdparam">$certificate</var>, </td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$passphrase</var><code>)</code>;</td><td>&nbsp;</td></tr></table><table border="0" summary="Function argument synopsis" cellspacing="0" cellpadding="0"><tr><td>&nbsp;</td><td><var class="pdparam">$certificate</var>;</td></tr><tr><td>&nbsp;</td><td><var class="pdparam">$passphrase</var>;</td></tr></table></div><p>This method sets the optional certificate and passphrase used in SSL-enabled communication with a remote server (when the <em class="parameter"><code>server_method</code></em> is set to 'https' in the client's construction).</p><p>The <em class="parameter"><code>certificate</code></em> parameter must be the filename of a PEM formatted certificate. The <em class="parameter"><code>passphrase</code></em> parameter must contain the password required to use the certificate.</p><p>This requires the "curl" extensions to be compiled into your installation of PHP.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e482"></a>1.2.4.&nbsp;setSSLVerifyPeer</h4></div></div></div><div class="funcsynopsis"><p><code class="funcdef">$client-&gt;setSSLVerifyPeer(</code><var class="pdparam">$i</var><code>)</code>;<br><code>$i</code>;</p></div><p>This method defines whether connections made to XMLRPC backends via HTTPS should verify the remote host's SSL certificate, and cause the connection to fail if the cert verification fails. <em class="parameter"><code>i</code></em> should be a boolean value. Default value: true.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e497"></a>1.2.5.&nbsp;setSSLVerifyHost</h4></div></div></div><div class="funcsynopsis"><p><code class="funcdef">$client-&gt;setSSLVerifyHost(</code><var class="pdparam">$i</var><code>)</code>;<br><code>$i</code>;</p></div><p>This method defines whether connections made to XMLRPC backends via HTTPS should verify the remote host's SSL certificate's common name (CN). By default, only the existence of a CN is checked. <em class="parameter"><code>i</code></em> should be an integer value; 0 to not check the CN at all, 1 to merely check for its existence, and 2 to check that the CN on the certificate matches the hostname that is being connected to.</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e512"></a>1.2.6.&nbsp;setDebug</h4></div></div></div><div class="funcsynopsis"><p><code class="funcdef">$client-&gt;setDebug(</code><var class="pdparam">$debugOn</var><code>)</code>;<br><code>$debugOn</code>;</p></div><p><em class="parameter"><code>debugOn</code></em> is either <code class="literal">0</code> or <code class="literal">1</code> depending on whether you require the client to print debugging information to the browser. The default is not to output this information.</p><p>The debugging information includes the raw data returned from the XML-RPC server it was querying, and the PHP value the client attempts to create to represent the value returned by the server. This option can be very useful when debugging servers as it allows you to see exactly what the server returns.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Class documentation&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;2.&nbsp;xmlrpcmsg</td></tr></table></div></body></html>