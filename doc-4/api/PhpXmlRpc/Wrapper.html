<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>PhpXmlRpc\Wrapper | PHP-XMLRPC</title>

            <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../css/sami.css">
        <script src="../js/jquery-1.11.1.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../js/typeahead.min.js"></script>
        <script src="../sami.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:PhpXmlRpc_Wrapper" data-root-path="../">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                <form id="search-form" action="../search.html" method="GET">
            <span class="glyphicon glyphicon-search"></span>
            <input name="search"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search">
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html">PHP-XMLRPC</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../classes.html">Classes</a></li>
                                            <li><a href="../namespaces.html">Namespaces</a></li>
                                        <li><a href="../interfaces.html">Interfaces</a></li>
                    <li><a href="../traits.html">Traits</a></li>
                    <li><a href="../doc-index.html">Index</a></li>
                    <li><a href="../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                                                            <li><a href="../PhpXmlRpc.html">PhpXmlRpc</a></li>
    
                <li>Wrapper</li>
            </ol>
        </div>
                <div id="page-content">
                
    <div class="page-header">
        <h1>Wrapper</h1>
    </div>

    <p>    class
    <strong>Wrapper</strong>
</p>

            <div class="description">
            <p>PHP-XMLRPC "wrapper" class - generate stubs to transparently access xmlrpc methods as php functions and vice-versa.</p>            <p>Note: this class implements the PROXY pattern, but it is not named so to avoid confusion with http proxies.</p>        </div>
    
    
    
            <h2>Properties</h2>

            <table class="table table-condensed">
                    <tr>
                <td class="type" id="property_objHolder">
                    static                                                            
    
                </td>
                <td>$objHolder</td>
                <td class="last">
</td>
                <td></td>
            </tr>
            </table>

    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    
    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_php2XmlrpcType">php2XmlrpcType</a>(
    string $phpType)
                                            <p>Given a string defining a php type or phpxmlrpc type (loosely defined: strings
accepted come from javadoc blocks), return corresponding phpxmlrpc type.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    string
                </div>
                <div class="col-md-8 type">
                    <a href="#method_xmlrpc2PhpType">xmlrpc2PhpType</a>(
    string $xmlrpcType)
                                            <p>Given a string defining a phpxmlrpc type return the corresponding php type.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    array|<abbr title="PhpXmlRpc\false">false</abbr>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_wrapPhpFunction">wrapPhpFunction</a>(
    callable $callable, 
    string $newFuncName = &#039;&#039;, 
    array $extraOptions = array())
                                            <p>Given a user-defined PHP function, create a PHP 'wrapper' function that can
be exposed as xmlrpc method from an xmlrpc server object and called from remote
clients (as well as its corresponding signature info).</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    array|<abbr title="PhpXmlRpc\false">false</abbr>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_wrapPhpClass">wrapPhpClass</a>(
    string|object $className, 
    array $extraOptions = array())
                                            <p>Given a user-defined PHP class or php object, map its methods onto a list of
PHP 'wrapper' functions that can be exposed as xmlrpc methods from an xmlrpc server
object and called from remote clients (as well as their corresponding signature info).</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    <a target="_blank" href="http://php.net/closure"><abbr title="closure">closure</abbr></a>|array|<abbr title="PhpXmlRpc\false">false</abbr>
                </div>
                <div class="col-md-8 type">
                    <a href="#method_wrapXmlrpcMethod">wrapXmlrpcMethod</a>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    string $methodName, 
    array $extraOptions = array())
                                            <p>Given an xmlrpc client and a method name, register a php wrapper function
that will call it and return results using native php types for both
params and results. The generated php function will return a Response
object for failed xmlrpc calls.</p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    array
                </div>
                <div class="col-md-8 type">
                    <a href="#method_buildWrapMethodSource">buildWrapMethodSource</a>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    string $methodName, 
    array $extraOptions, 
    string $newFuncName, 
    array $mSig, 
    string $mDesc = &#039;&#039;)
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    
    mixed
                </div>
                <div class="col-md-8 type">
                    <a href="#method_wrapXmlrpcServer">wrapXmlrpcServer</a>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    array $extraOptions = array())
                                            <p>Similar to wrapXmlrpcMethod, but will generate a php class that wraps
all xmlrpc methods exposed by the remote server as own methods.</p>                </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method_php2XmlrpcType">
        <div class="location">at line 36</div>
        <code>                    
    string
    <strong>php2XmlrpcType</strong>(
    string $phpType)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Given a string defining a php type or phpxmlrpc type (loosely defined: strings
accepted come from javadoc blocks), return corresponding phpxmlrpc type.</p>                    <p>Notes:
- for php 'resource' types returns empty string, since resources cannot be serialized;
- for php class names returns 'struct', since php objects can be serialized as xmlrpc structs
- for php arrays always return array, even though arrays sometimes serialize as json structs
- for 'void' and 'null' returns 'undefined'</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$phpType</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    string</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_xmlrpc2PhpType">
        <div class="location">at line 78</div>
        <code>                    
    string
    <strong>xmlrpc2PhpType</strong>(
    string $xmlrpcType)</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Given a string defining a phpxmlrpc type return the corresponding php type.</p>                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string</td>
                <td>$xmlrpcType</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    string</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_wrapPhpFunction">
        <div class="location">at line 150</div>
        <code>                    
    array|<abbr title="PhpXmlRpc\false">false</abbr>
    <strong>wrapPhpFunction</strong>(
    callable $callable, 
    string $newFuncName = &#039;&#039;, 
    array $extraOptions = array())</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Given a user-defined PHP function, create a PHP 'wrapper' function that can
be exposed as xmlrpc method from an xmlrpc server object and called from remote
clients (as well as its corresponding signature info).</p>                    <p>Since php is a typeless language, to infer types of input and output parameters,
it relies on parsing the javadoc-style comment block associated with the given
function. Usage of xmlrpc native types (such as datetime.dateTime.iso8601 and base64)
in the @param tag is also allowed, if you need the php function to receive/send
data in that particular format (note that base64 encoding/decoding is transparently
carried out by the lib, while datetime vals are passed around as strings)</p>

<p>Known limitations:
- only works for user-defined functions, not for PHP internal functions
  (reflection does not support retrieving number/type of params for those)
- functions returning php objects will generate special structs in xmlrpc responses:
  when the xmlrpc decoding of those responses is carried out by this same lib, using
  the appropriate param in php<em>xmlrpc</em>decode, the php objects will be rebuilt.
  In short: php objects can be serialized, too (except for their resource members),
  using this function.
  Other libs might choke on the very same xml that will be generated in this case
  (i.e. it has a nonstandard attribute on struct element tags)</p>

<p>Note that since rel. 2.0RC3 the preferred method to have the server call 'standard'
php functions (ie. functions not expecting a single Request obj as parameter)
is by making use of the functions<em>parameters</em>type class member.</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    callable</td>
                <td>$callable</td>
                <td>the PHP user function to be exposed as xmlrpc method/ a closure, function name, array($obj, 'methodname') or array('class', 'methodname') are ok</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$newFuncName</td>
                <td>(optional) name for function to be created. Used only when return_source in $extraOptions is true</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$extraOptions</td>
                <td>(optional) array of options for conversion. valid values include:
                           - bool return<em>source     when true, php code w. function definition will be returned, instead of a closure
                           - bool encode</em>php<em>objs   let php objects be sent to server using the 'improved' xmlrpc notation, so server can deserialize them as php objects
                           - bool decode</em>php<em>objs   --- WARNING !!! possible security hazard. only use it with trusted servers ---
                           - bool suppress</em>warnings remove from produced xml any warnings generated at runtime by the php function being invoked</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    array|<abbr title="PhpXmlRpc\false">false</abbr></td>
            <td>false on error, or an array containing the name of the new php function,
                    its signature and docs, to be used in the server dispatch map</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_wrapPhpClass">
        <div class="location">at line 598</div>
        <code>                    
    array|<abbr title="PhpXmlRpc\false">false</abbr>
    <strong>wrapPhpClass</strong>(
    string|object $className, 
    array $extraOptions = array())</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Given a user-defined PHP class or php object, map its methods onto a list of
PHP 'wrapper' functions that can be exposed as xmlrpc methods from an xmlrpc server
object and called from remote clients (as well as their corresponding signature info).</p>                                </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    string|object</td>
                <td>$className</td>
                <td>the name of the class whose methods are to be exposed as xmlrpc methods, or an object instance of that class</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$extraOptions</td>
                <td>see the docs for wrapPhpMethod for basic options, plus
                           - string method<em>type    'static', 'nonstatic', 'all' and 'auto' (default); the latter will switch between static and non-static depending on whether $className is a class name or object instance
                           - string method</em>filter  a regexp used to filter methods to wrap based on their names
                           - string prefix         used for the names of the xmlrpc methods created</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    array|<abbr title="PhpXmlRpc\false">false</abbr></td>
            <td>false on failure</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_wrapXmlrpcMethod">
        <div class="location">at line 675</div>
        <code>                    
    <a target="_blank" href="http://php.net/closure"><abbr title="closure">closure</abbr></a>|array|<abbr title="PhpXmlRpc\false">false</abbr>
    <strong>wrapXmlrpcMethod</strong>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    string $methodName, 
    array $extraOptions = array())</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Given an xmlrpc client and a method name, register a php wrapper function
that will call it and return results using native php types for both
params and results. The generated php function will return a Response
object for failed xmlrpc calls.</p>                    <p>Known limitations:
- server must support system.methodsignature for the wanted xmlrpc method
- for methods that expose many signatures, only one can be picked (we
  could in principle check if signatures differ only by number of params
  and not by type, but it would be more complication than we can spare time)
- nested xmlrpc params: the caller of the generated php function has to
  encode on its own the params passed to the php function if these are structs
  or arrays whose (sub)members include values of type datetime or base64</p>

<p>Notes: the connection properties of the given client will be copied
and reused for the connection used during the call to the generated
php function.
Calling the generated php function 'might' be slow: a new xmlrpc client
is created on every invocation and an xmlrpc-connection opened+closed.
An extra 'debug' param is appended to param list of xmlrpc method, useful
for debugging purposes.</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a></td>
                <td>$client</td>
                <td>an xmlrpc client set up correctly to communicate with target server</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$methodName</td>
                <td>the xmlrpc method to be mapped to a php function</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$extraOptions</td>
                <td>array of options that specify conversion details. Valid options include
                           - integer signum              the index of the method signature to use in mapping (if method exposes many sigs)
                           - integer timeout             timeout (in secs) to be used when executing function/calling remote method
                           - string  protocol            'http' (default), 'http11' or 'https'
                           - string  new<em>function</em>name   the name of php function to create, when return<em>source is used. If unspecified, lib will pick an appropriate name
                           - string  return</em>source       if true return php code w. function definition instead of function itself (closure)
                           - bool    encode<em>php</em>objs     let php objects be sent to server using the 'improved' xmlrpc notation, so server can deserialize them as php objects
                           - bool    decode<em>php</em>objs     --- WARNING !!! possible security hazard. only use it with trusted servers ---
                           - mixed   return<em>on</em>fault     a php value to be returned when the xmlrpc call fails/returns a fault response (by default the Response object is returned in this case). If a string is used, '%faultCode%' and '%faultString%' tokens will be substituted with actual error values
                           - bool    debug               set it to 1 or 2 to see debug results of querying server for method synopsis
                           - int     simple<em>client</em>copy  set it to 1 to have a lightweight copy of the $client object made in the generated code (only used when return_source = true)</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    <a target="_blank" href="http://php.net/closure"><abbr title="closure">closure</abbr></a>|array|<abbr title="PhpXmlRpc\false">false</abbr></td>
            <td>false on failure, closure by default and array for return_source = true</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_buildWrapMethodSource">
        <div class="location">at line 882</div>
        <code>                    
    array
    <strong>buildWrapMethodSource</strong>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    string $methodName, 
    array $extraOptions, 
    string $newFuncName, 
    array $mSig, 
    string $mDesc = &#039;&#039;)</code>
    </h3>
    <div class="details">
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a></td>
                <td>$client</td>
                <td>
</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$methodName</td>
                <td>
</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$extraOptions</td>
                <td>
</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$newFuncName</td>
                <td>
</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$mSig</td>
                <td>
</td>
            </tr>
                    <tr>
                <td>
    string</td>
                <td>$mDesc</td>
                <td>
</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    array</td>
            <td>
</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_wrapXmlrpcServer">
        <div class="location">at line 989</div>
        <code>                    
    mixed
    <strong>wrapXmlrpcServer</strong>(
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a> $client, 
    array $extraOptions = array())</code>
    </h3>
    <div class="details">
                    <div class="method-description">
                                    <p>Similar to wrapXmlrpcMethod, but will generate a php class that wraps
all xmlrpc methods exposed by the remote server as own methods.</p>                    <p>For more details see wrapXmlrpcMethod.</p>

<p>For a slimmer alternative, see the code in demo/client/proxy.php</p>

<p>Note that unlike wrapXmlrpcMethod, we always have to generate php code here. It seems that php 7 will have anon classes...</p>            </div>
                <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>
    <a href="../PhpXmlRpc/Client.html"><abbr title="PhpXmlRpc\Client">Client</abbr></a></td>
                <td>$client</td>
                <td>the client obj all set to query the desired server</td>
            </tr>
                    <tr>
                <td>
    array</td>
                <td>$extraOptions</td>
                <td>list of options for wrapped code. See the ones from wrapXmlrpcMethod plus
             - string method<em>filter      regular expression
             - string new</em>class<em>name
             - string prefix
             - bool   simple</em>client_copy set it to true to avoid copying all properties of $client into the copy made in the new class</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>
    mixed</td>
            <td>false on error, the name of the created class if all ok or an array with code, class name and comments (if the appropriatevoption is set in extra_options)</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

            </div>
            </div>

    
            </div>
                <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
    </div>

        </div>
    </div>
    </body>

</html>
